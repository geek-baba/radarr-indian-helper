<header class="sticky top-0 z-30 bg-[var(--surface)] dark:bg-brand-surfaceDark border-b border-[var(--border)] shadow-header">
  <div class="h-16 px-4 flex items-center justify-between">
    <div class="flex items-center gap-2">
      <button id="openSidebar" class="icon-btn lg:hidden" aria-label="Open sidebar" type="button">
        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>

      <div class="relative flex-1 max-w-2xl">
        <input 
          id="globalSearch" 
          type="search" 
          placeholder="Search… (⌘K / Ctrl+K)"
          value="<%= typeof currentSearch !== 'undefined' ? currentSearch : '' %>"
          class="w-full rounded-xl border border-[var(--border)] bg-white/70 dark:bg-white/5 px-4 py-2 pr-10 focus:ring-2 focus:ring-brand-primary focus:border-brand-primary outline-none text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400"
          aria-label="Global search"
        />
        <% if (typeof currentSearch !== 'undefined' && currentSearch) { %>
          <button 
            id="clearGlobalSearch"
            type="button"
            onclick="clearGlobalSearch()"
            class="absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"
            aria-label="Clear search"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        <% } %>
      </div>
    </div>

    <div class="flex items-center gap-3">
      <% if (typeof lastRefresh !== 'undefined') { %>
        <div class="text-sm text-gray-600 dark:text-gray-400">
          <% if (lastRefresh) { %>
            Last refreshed: <span class="font-medium" id="lastRefreshTime" data-utc="<%= lastRefresh %>">Loading...</span>
          <% } else { %>
            Last refreshed: Never
          <% } %>
        </div>
      <% } %>
      <button 
        id="refreshBtn" 
        class="px-3 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 transition-colors font-medium text-sm"
        type="button"
        aria-label="Refresh page"
      >
        Refresh
      </button>
      <%- include('dark-mode-toggle') %>
    </div>
  </div>
</header>

